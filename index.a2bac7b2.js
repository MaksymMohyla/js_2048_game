var t,e,s=document.querySelector(".game-field"),a=!1,i=new/*#__PURE__*/(function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.initialState=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0}return t=[{key:"moveLeft",value:function(){for(var t=JSON.parse(JSON.stringify(this.state)),e=0;e<4;e++)for(var s=0,a=1;a<4;a++)if(0!==this.state[e][a])for(var i=a;i>s;i--)if(0===this.state[e][i-1])this.state[e][i-1]=this.state[e][i],this.state[e][i]=0;else if(this.state[e][i-1]===this.state[e][i]){this.state[e][i-1]*=2,this.state[e][i]=0,this.score+=this.state[e][i-1],s=i;break}else{s=i-1;break}switch(this.updateHTML(),this.compareStates(t,this.state)||this.addRandomTile(),this.updateScore(),this.getStatus()){case"lose":this.gameOver();break;case"win":document.querySelector(".message-win").classList.remove("hidden")}}},{key:"moveRight",value:function(){for(var t=JSON.parse(JSON.stringify(this.state)),e=0;e<4;e++)for(var s=3,a=2;a>=0;a--)if(0!==this.state[e][a])for(var i=a;i<s;i++)if(0===this.state[e][i+1])this.state[e][i+1]=this.state[e][i],this.state[e][i]=0;else if(this.state[e][i+1]===this.state[e][i]){this.state[e][i+1]*=2,this.state[e][i]=0,this.score+=this.state[e][i+1],s=i;break}else{s=i+1;break}switch(this.updateHTML(),this.compareStates(t,this.state)||this.addRandomTile(),this.updateScore(),this.getStatus()){case"lose":this.gameOver();break;case"win":document.querySelector(".message-win").classList.remove("hidden")}}},{key:"moveUp",value:function(){for(var t=JSON.parse(JSON.stringify(this.state)),e=0;e<4;e++)for(var s=0,a=1;a<4;a++)if(0!==this.state[a][e])for(var i=a;i>s;i--)if(0===this.state[i-1][e])this.state[i-1][e]=this.state[i][e],this.state[i][e]=0;else if(this.state[i-1][e]===this.state[i][e]){this.state[i-1][e]*=2,this.state[i][e]=0,this.score+=this.state[i-1][e],s=i;break}else{s=i-1;break}switch(this.updateHTML(),this.compareStates(t,this.state)||this.addRandomTile(),this.updateScore(),this.getStatus()){case"lose":this.gameOver();break;case"win":document.querySelector(".message-win").classList.remove("hidden")}}},{key:"moveDown",value:function(){for(var t=JSON.parse(JSON.stringify(this.state)),e=0;e<4;e++)for(var s=3,a=2;a>=0;a--)if(0!==this.state[a][e])for(var i=a;i<s;i++)if(0===this.state[i+1][e])this.state[i+1][e]=this.state[i][e],this.state[i][e]=0;else if(this.state[i+1][e]===this.state[i][e]){this.state[i+1][e]*=2,this.state[i][e]=0,this.score+=this.state[i+1][e],s=i;break}else{s=i+1;break}switch(this.updateHTML(),this.compareStates(t,this.state)||this.addRandomTile(),this.updateScore(),this.getStatus()){case"lose":this.gameOver();break;case"win":document.querySelector(".message-win").classList.remove("hidden")}}},{key:"compareStates",value:function(t,e){for(var s=0;s<4;s++)for(var a=0;a<4;a++)if(t[s][a]!==e[s][a])return!1;return!0}},{key:"getStatus",value:function(){var t=this.isAnyMovePossible();return this.state.some(function(t){return t.includes(2048)})?"win":t?"playing":"lose"}},{key:"isAnyMovePossible",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===this.state[t][e]||e<3&&this.state[t][e]===this.state[t][e+1]||t<3&&this.state[t][e]===this.state[t+1][e])return!0;return!1}},{key:"gameOver",value:function(){document.querySelector(".message-lose").classList.remove("hidden"),a=!0}},{key:"start",value:function(){this.state=JSON.parse(JSON.stringify(this.initialState)),this.updateHTML();for(var t=0;t<2;t++)this.addRandomTile()}},{key:"addRandomTile",value:function(){do t=Math.floor(4*Math.random()),e=Math.floor(4*Math.random());while(0!==this.state[t][e])this.state[t][e]=.1>Math.random()?4:2;var t,e,a=s.rows[t].cells[e];a.textContent=this.state[t][e],a.classList.add("field-cell--".concat(this.state[t][e])),a.classList.add("slide-in-down"),setTimeout(function(){a.classList.remove("slide-in-down")},300)}},{key:"updateHTML",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){var a=s.rows[t].cells[e];a.textContent=this.state[t][e]||"",a.className="field-cell",this.state[t][e]&&a.classList.add("field-cell--".concat(this.state[t][e]))}}},{key:"updateScore",value:function(){document.querySelector(".game-score").textContent=this.score}}],function(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(e.prototype,t),e}()),r=document.querySelector(".start");r.addEventListener("click",function(){i.start(),r.classList.remove("start"),r.classList.add("restart"),r.innerText="Restart",i.score=0,i.updateScore(),a&&(document.querySelector(".message-lose").classList.add("hidden"),a=!1)}),document.addEventListener("keydown",function(t){if(!a)switch(t.preventDefault(),t.key){case"ArrowLeft":i.moveLeft();break;case"ArrowRight":i.moveRight();break;case"ArrowUp":i.moveUp();break;case"ArrowDown":i.moveDown()}}),document.addEventListener("touchstart",function(s){t=s.touches[0].clientX,e=s.touches[0].clientY}),document.addEventListener("touchend",function(s){var a=s.changedTouches[0].clientX,r=s.changedTouches[0].clientY,o=a-t,n=r-e;Math.abs(o)>Math.abs(n)?o>0?i.moveRight():i.moveLeft():n>0?i.moveDown():i.moveUp()});
//# sourceMappingURL=index.a2bac7b2.js.map
